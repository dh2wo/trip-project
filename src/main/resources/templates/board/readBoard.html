<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>[글보기]</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function (){

            $("#btnRec").on("click",function(){
                let bNum = $("#boardNum").text();
                $.ajax({
                    //내가 필요한 설정등을 써서 서버에 보낼 수 있음
                    url: "/recommend", //호출할 서버의 url
                    method:"post",	// get or host
                    data: {"boardNo" : parseInt(bNum)}, // url을 호출하면서 넘겨줄 데이터
                    success : function(data){
                        if(data.value2){
                            $("#rec").text(data.value2);
                        }
                        if(data.value1=="OK"){
                            alert("추천이 완료되었습니다.");
                        }else{
                            alert("이미 추천한 글입니다.");
                        }
                    }
                });
            });
        });
    </script>
</head>
<body>
<h1>글보기</h1>
<!-- 글 번호, 제목, 내용, 글쓴이, 글쓴 시간, 조회수, 첨부파일(있다면) -->

<table th:object="${board}" border=1>
    <tr>
        <th th:text="*{boardNo}" id ="boardNum">글번호</th>
        <th th:text="*{boardTitle}" colspan="2">제목</th>
    </tr>
    <tr>
        <th th:text="*{userNickname}">글쓴이</th>
        <th th:text="*{inputDate}">글쓴 시간</th>
        <th th:text="*{boardView}">조회수</th>
    </tr>
    <tr>
        <th colspan="3" th:text="*{boardSummary}">내용</th>
    </tr>
    <tr>
        <th colspan="3">
            좋아요:<span id = "rec" th:text="*{recommend}">0</span>&nbsp;&nbsp;<input type ="button" value="추천" id="btnRec"></tr>
        </th>

    <a th:href="@{/board}">목록보기</a>

</table>

</body>
</html>